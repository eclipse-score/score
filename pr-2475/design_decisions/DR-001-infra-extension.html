
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>DR-001-Infra-Extension: S-CORE Build Execution Contract &#8212; S-CORE  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=4ae1632d" />
    <link rel="stylesheet" type="text/css" href="../_static/css/score.css?v=6e51530f" />
    <link rel="stylesheet" type="text/css" href="../_static/css/score_needs.css?v=e97392eb" />
    <link rel="stylesheet" type="text/css" href="../_static/css/score_design.css?v=d9fd870c" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-data-viewer/jsonview.bundle.css?v=f6ef2277" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-needs/libs/html/datatables.min.css?v=4b4fd840" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-needs/common_css/need_toggle.css?v=5c6620df" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-needs/common_css/needstable.css?v=5e1b6797" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-needs/common_css/need_core.css?v=f5b60a78" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-needs/common_css/need_links.css?v=2150a916" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-needs/common_css/need_style.css?v=92936fa5" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-needs/modern.css?v=803738c0" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/jquery.js?v=5d32c60e"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="../_static/documentation_options.js?v=7f41d439"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script src="../_static/sphinx-data-viewer/jsonview.bundle.js?v=18cd53c5"></script>
    <script src="../_static/sphinx-data-viewer/jsonview_loader.js?v=f7ff7e7d"></script>
    <script src="../_static/sphinx-needs/libs/html/datatables.min.js?v=8a4aee21"></script>
    <script src="../_static/sphinx-needs/libs/html/datatables_loader.js?v=a2cae175"></script>
    <script src="../_static/sphinx-needs/libs/html/sphinx_needs_collapse.js?v=dca66431"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'design_decisions/DR-001-infra-extension';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.16.1';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://eclipse-score.github.io/score/versions.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = '';
        DOCUMENTATION_OPTIONS.show_version_warning_banner =
            false;
        </script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="DR-002-Infra: Integration Testing in a Distributed Monolith" href="DR-002-infra.html" />
    <link rel="prev" title="DR-001-Infra: Integration Strategy for External Development Tools" href="DR-001-infra.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="0.1" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
  
    <p class="title logo__title">Eclipse S-CORE</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../handbook/index.html">
    Handbook
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../features/index.html">
    Features
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../requirements/index.html">
    Requirements
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../modules/index.html">
    Modules
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../contribute/index.html">
    Contribute
  </a>
</li>

            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button"
                data-bs-toggle="dropdown" aria-expanded="false"
                aria-controls="pst-nav-more-links">
                    More
                </button>
                <ul id="pst-nav-more-links" class="dropdown-menu">
                    
<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../score_releases/index.html">
    Releases
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../score_tools/index.html">
    Tools
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../platform_management_plan/index.html">
    PMP
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-external" href="https://projects.eclipse.org/projects/automotive.score">
    Eclipse
  </a>
</li>


<li class=" current active">
  <a class="nav-link dropdown-item nav-internal" href="index.html">
    Decision Records
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../introduction/index.html">
    Eclipse S-CORE (Eclipse Safe Open Vehicle Core)
  </a>
</li>

                </ul>
            </li>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/eclipse-score" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
        <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-2"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-2"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-2"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-2">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../handbook/index.html">
    Handbook
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../features/index.html">
    Features
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../requirements/index.html">
    Requirements
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../modules/index.html">
    Modules
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../contribute/index.html">
    Contribute
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../score_releases/index.html">
    Releases
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../score_tools/index.html">
    Tools
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../platform_management_plan/index.html">
    PMP
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://projects.eclipse.org/projects/automotive.score">
    Eclipse
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    Decision Records
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../introduction/index.html">
    Eclipse S-CORE (Eclipse Safe Open Vehicle Core)
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/eclipse-score" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
          <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-3"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-3"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-3"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-3">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="DR-001-infra.html">DR-001-Infra: Integration Strategy for External Development Tools</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">DR-001-Infra-Extension: S-CORE Build Execution Contract</a></li>
<li class="toctree-l1"><a class="reference internal" href="DR-002-infra.html">DR-002-Infra: Integration Testing in a Distributed Monolith</a></li>
<li class="toctree-l1"><a class="reference internal" href="DR-003-infra.html">DR-003-Infra: Devcontainer Strategy for S-CORE</a></li>
<li class="toctree-l1"><a class="reference internal" href="DR-004-infra.html">DR-004-Infra: Bi-directional traceability in docs</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">Decision Records</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">DR-001-Infra-Extension: S-CORE Build Execution Contract</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <!--
Copyright (c) 2025 Contributors to the Eclipse Foundation

See the NOTICE file(s) distributed with this work for additional
information regarding copyright ownership.

This program and the accompanying materials are made available under the
terms of the Apache License Version 2.0 which is available at
https://www.apache.org/licenses/LICENSE-2.0

SPDX-License-Identifier: Apache-2.0
-->
<section id="dr-001-infra-extension-s-core-build-execution-contract">
<h1>DR-001-Infra-Extension: S-CORE Build Execution Contract<a class="headerlink" href="#dr-001-infra-extension-s-core-build-execution-contract" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><strong>Date:</strong> 2026-01-20</p></li>
</ul>
<div class="need_container docutils container" id="SNCB-c0dc2c0c">
<div class="pst-scrollable-table-container"><table class="need needs_grid_complex needs_layout_score needs_style_none needs_type_dec_rec table" id="dec_rec__infra__execution_contract">
<tbody>
<tr class="head row-odd"><td class="head_left" colspan="2"><div class="needs_head_left line-block">
<div class="line"><span><span class="needs_title"><span class="needs_data">S-CORE Build Execution Contract</span></span></span></div>
</div>
</td>
<td class="head_center" colspan="2"><div class="needs_head line-block">
<div class="line"><span><span class="needs_status"><span class="needs_label">status: </span><span class="needs_data">accepted</span></span></span></div>
<div class="line"><span></span></div>
<div class="line"><span></span></div>
</div>
</td>
<td class="head_right" colspan="2"><div class="needs_head_right line-block">
<div class="line"><span><span class="needs needs_collapse" id="target__show__meta"><span class="needs collapsed"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-down-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="8 12 12 16 16 12"></polyline><line x1="12" y1="8" x2="12" y2="16"></line></svg></span><span class="needs visible collapse_is_hidden"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="12 16 16 12 12 8"></polyline><line x1="8" y1="12" x2="16" y2="12"></line></svg></span></span></span></div>
</div>
</td>
</tr>
<tr class="meta row-even"><td class="meta" colspan="3"><div class="needs_meta_left line-block">
<div class="line"><span><span><div class="line"><span class="needs_context"><span class="needs_label">context: </span><span class="needs_data">Infrastructure</span></span></div>
<div class="line"><span class="needs_decision"><span class="needs_label">decision: </span><span class="needs_data">Adopt a layered execution contract</span></span></div>
</span></span></div>
<div class="line"><span></span></div>
</div>
</td>
<td class="meta" colspan="3"></td>
</tr>
<tr class="content row-odd"><td class="content" colspan="6"></td>
</tr>
<tr class="footer row-even"><td class="footer_left" colspan="2"><div class="needs_footer_left line-block">
<div class="line"><span><span class="needs-id"><a class="reference internal" href="#dec_rec__infra__execution_contract" title="dec_rec__infra__execution_contract">dec_rec__infra__execution_contract</a></span></span></div>
</div>
</td>
<td class="footer" colspan="2"><div class="needs_footer line-block">
<div class="line"><span><span class="needs_type_name"><span class="needs_data">Decision Record</span></span></span></div>
</div>
</td>
<td class="footer_right" colspan="2"></td>
</tr>
</tbody>
</table>
</div>
</div>
<hr class="docutils" />
<section id="purpose">
<h2>Purpose<a class="headerlink" href="#purpose" title="Link to this heading">#</a></h2>
<p>This document defines the execution contract for S-CORE builds across developer machines
and CI infrastructure.
Its goal is to ensure <strong>long-term reproducibility (≥10 years)</strong>, <strong>traceability</strong> and
<strong>practical hermeticity</strong>, despite changes in underlying infrastructure such as
GitHub-hosted runners.</p>
<p>It builds on [DR-001], which was concerned about the same topics, but was focused on tools only. This adds details where the original description was too fuzzy.</p>
<p>The contract is intentionally <strong>layered</strong>, because different parts of the system control
different capabilities and failure modes.</p>
</section>
<hr class="docutils" />
<section id="core-requirements">
<h2>Core Requirements<a class="headerlink" href="#core-requirements" title="Link to this heading">#</a></h2>
<section id="r1-long-term-reproducibility">
<h3>R1 — Long-Term Reproducibility<a class="headerlink" href="#r1-long-term-reproducibility" title="Link to this heading">#</a></h3>
<p>S-CORE builds must be reproducible for <strong>at least 10 years</strong> after creation, given:</p>
<ul class="simple">
<li><p>the source revision</p></li>
<li><p>archived execution context</p></li>
<li><p>archived toolchains</p></li>
<li><p>recorded build metadata</p></li>
</ul>
<p>This must remain possible even if:</p>
<ul class="simple">
<li><p>GitHub runner images change or are retired</p></li>
<li><p>upstream toolchains are no longer available</p></li>
<li><p>external services are unavailable</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="r2-traceability">
<h3>R2 — Traceability<a class="headerlink" href="#r2-traceability" title="Link to this heading">#</a></h3>
<p>For every build artifact, it must be possible to determine <strong>exactly</strong>:</p>
<ul class="simple">
<li><p>which sources were used</p></li>
<li><p>which toolchains and tool versions were used</p></li>
<li><p>which Bazel version and flags were used</p></li>
<li><p>which execution context (container image) was used</p></li>
<li><p>which host baseline constraints applied</p></li>
</ul>
<p>This information must be recorded in a <strong>build manifest</strong> and stored alongside the build
outputs.</p>
</section>
<hr class="docutils" />
<section id="r3-hermeticity-practical">
<h3>R3 — Hermeticity (Practical)<a class="headerlink" href="#r3-hermeticity-practical" title="Link to this heading">#</a></h3>
<p>Build actions must not depend on <strong>undeclared inputs</strong>.</p>
<p>In practice:</p>
<ul class="simple">
<li><p>Tools affecting build outputs must either be:</p>
<ul>
<li><p>managed by Bazel, or</p></li>
<li><p>explicitly injected as Bazel action inputs, or</p></li>
<li><p>reflected in cache partitioning</p></li>
</ul>
</li>
<li><p>Reliance on host state must be minimized and documented where unavoidable.</p></li>
</ul>
<p>Perfect hermeticity is not required, but <strong>undeclared variability is not acceptable</strong>.</p>
</section>
</section>
<hr class="docutils" />
<section id="three-layer-execution-contract">
<h2>Three-Layer Execution Contract<a class="headerlink" href="#three-layer-execution-contract" title="Link to this heading">#</a></h2>
<section id="layer-1-host-platform-contract">
<h3>Layer 1 — Host Platform Contract<a class="headerlink" href="#layer-1-host-platform-contract" title="Link to this heading">#</a></h3>
<p>This layer defines the <strong>non-virtualized constraints</strong> imposed by the machine running
the build.</p>
<section id="scope">
<h4>Scope<a class="headerlink" href="#scope" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p>GitHub-hosted runners</p></li>
<li><p>self-hosted runners (VM or bare metal)</p></li>
<li><p>kernel-level features shared with containers</p></li>
</ul>
</section>
<section id="responsibilities">
<h4>Responsibilities<a class="headerlink" href="#responsibilities" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p>Linux kernel version and configuration</p></li>
<li><p>Security mechanisms (AppArmor / LSM)</p></li>
<li><p>Filesystems, networking, namespaces</p></li>
<li><p>Support for:</p>
<ul>
<li><p>Bazel <code class="docutils literal notranslate"><span class="pre">linux-sandbox</span></code></p></li>
<li><p>QEMU / <code class="docutils literal notranslate"><span class="pre">binfmt</span></code></p></li>
<li><p>privileged operations where required</p></li>
</ul>
</li>
</ul>
</section>
<section id="requirements">
<h4>Requirements<a class="headerlink" href="#requirements" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p>Linux host OS (Ubuntu LTS for reference integration)</p></li>
<li><p>Kernel must support:</p>
<ul>
<li><p>unprivileged user namespaces</p></li>
<li><p>mount operations required by Bazel sandboxing</p></li>
</ul>
</li>
<li><p>Host security policies must not block Bazel <code class="docutils literal notranslate"><span class="pre">linux-sandbox</span></code> unless explicitly documented</p></li>
</ul>
</section>
<section id="known-constraints">
<h4>Known Constraints<a class="headerlink" href="#known-constraints" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p>Ubuntu 24.04+ AppArmor may block Bazel sandbox mount operations</p></li>
<li><p>Containers <strong>cannot</strong> mitigate host-kernel restrictions</p></li>
</ul>
</section>
<section id="policy">
<h4>Policy<a class="headerlink" href="#policy" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p>A <strong>Reference Integration Host Baseline</strong> must be defined (e.g. Ubuntu 22.04).</p></li>
<li><p>Deviations (e.g. privileged runners, sandbox disabled) must be explicit and isolated.</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="layer-2-execution-context-contract-devcontainer">
<h3>Layer 2 — Execution Context Contract (Devcontainer)<a class="headerlink" href="#layer-2-execution-context-contract-devcontainer" title="Link to this heading">#</a></h3>
<p>This layer defines the <strong>default user-space environment</strong> in which builds are executed.</p>
<section id="id1">
<h4>Purpose<a class="headerlink" href="#id1" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p>Provide consistent runtime ABI (<code class="docutils literal notranslate"><span class="pre">glibc</span></code>, <code class="docutils literal notranslate"><span class="pre">libstdc++</span></code>)</p></li>
<li><p>Ensure tool binaries (e.g. rustc) can execute reliably</p></li>
<li><p>Eliminate “works on my machine” discrepancies</p></li>
<li><p>Enable local reproduction of CI builds</p></li>
</ul>
</section>
<section id="definition">
<h4>Definition<a class="headerlink" href="#definition" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p>A <strong>versioned devcontainer image</strong> is the default execution context for CI and local builds.</p></li>
<li><p>The container image must be:</p>
<ul>
<li><p>built from a <strong>defined Ubuntu LTS baseline</strong></p></li>
<li><p>compatible with common developer tooling (e.g. by following the <a class="reference external" href="https://containers.dev/">specification</a>)</p></li>
<li><p>referenced by an <strong>immutable image digest</strong></p></li>
<li><p>archived for <strong>long-term reproducibility</strong></p></li>
</ul>
</li>
</ul>
</section>
<section id="baseline-preservation-and-reproducibility">
<h4>Baseline Preservation and Reproducibility<a class="headerlink" href="#baseline-preservation-and-reproducibility" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p>Once a devcontainer image is used in CI, its image digest becomes part of the build provenance</p></li>
<li><p>All such images must be archived and retrievable for <strong>at least 10 years</strong></p></li>
<li><p>Reproducing historical builds may rely on legacy container runtimes or CLI-only execution,
and does not require continued IDE support</p></li>
</ul>
</section>
<section id="id2">
<h4>Responsibilities<a class="headerlink" href="#id2" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p>User-space runtime libraries</p></li>
<li><p>Bootstrap tooling (git, bash, coreutils, python, etc.)</p></li>
<li><p>Bazel entrypoint (preferably Bazelisk)</p></li>
<li><p>Development UX tooling (optional)</p></li>
</ul>
</section>
<section id="non-goals">
<h4>Non-Goals<a class="headerlink" href="#non-goals" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p>The devcontainer must <strong>not silently override</strong> repository-declared Bazel versions.</p></li>
<li><p>The devcontainer must <strong>not be the only place</strong> where critical tool versions are defined.</p></li>
</ul>
</section>
<section id="id3">
<h4>Policy<a class="headerlink" href="#id3" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p>The devcontainer defines the <strong>default</strong> environment, not the <strong>only</strong> supported one.</p></li>
<li><p>Builds should still be possible on compatible bare-metal hosts.</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="layer-3-bazel-contract">
<h3>Layer 3 — Bazel Contract<a class="headerlink" href="#layer-3-bazel-contract" title="Link to this heading">#</a></h3>
<p>This layer defines <strong>what Bazel controls and guarantees</strong>.</p>
<section id="bazel-versioning">
<h4>Bazel Versioning<a class="headerlink" href="#bazel-versioning" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p>Each repository must contain <code class="docutils literal notranslate"><span class="pre">.bazelversion</span></code>.</p></li>
<li><p>S-CORE uses a <strong>single Bazel version</strong> across repositories.</p></li>
<li><p>CI enforces version consistency.</p></li>
</ul>
</section>
<section id="toolchains-and-tools">
<h4>Toolchains and Tools<a class="headerlink" href="#toolchains-and-tools" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p>Toolchains (e.g. Rust/Ferrocene, C/C++) must be:</p>
<ul>
<li><p>versioned</p></li>
<li><p>immutable</p></li>
<li><p>built against a documented baseline</p></li>
</ul>
</li>
<li><p>Tools affecting outputs must be known to Bazel or reflected in action inputs.</p></li>
</ul>
</section>
<section id="hermeticity-guarantees">
<h4>Hermeticity Guarantees<a class="headerlink" href="#hermeticity-guarantees" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p>Bazel sandboxing provides reproducibility <strong>given runnable tools</strong>.</p></li>
<li><p>Bazel does <strong>not</strong> virtualize:</p>
<ul>
<li><p>kernel</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">glibc</span></code></p></li>
<li><p>host security configuration</p></li>
</ul>
</li>
</ul>
<p>These constraints must be handled in Layer 1 and Layer 2.</p>
</section>
</section>
</section>
<hr class="docutils" />
<section id="minimum-supported-baselines">
<h2>Minimum Supported Baselines<a class="headerlink" href="#minimum-supported-baselines" title="Link to this heading">#</a></h2>
<section id="os-and-runtime-baseline">
<h3>OS and Runtime Baseline<a class="headerlink" href="#os-and-runtime-baseline" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Minimum supported baseline: <strong>Ubuntu 20.04 LTS</strong> (subject to revision)</p></li>
<li><p>Toolchains must be built against this baseline</p></li>
<li><p>Older environments are <strong>not supported</strong></p></li>
</ul>
</section>
<section id="rationale">
<h3>Rationale<a class="headerlink" href="#rationale" title="Link to this heading">#</a></h3>
<p>We explicitly do <strong>not</strong> support all historical <code class="docutils literal notranslate"><span class="pre">glibc</span></code> or kernel versions.
Portability is achieved by choosing and documenting a baseline, not by unlimited
backward compatibility. Layer 2 can easily be virtualized as needed, for future reproducibility.</p>
</section>
</section>
<hr class="docutils" />
<section id="build-provenance-and-archiving">
<h2>Build Provenance and Archiving<a class="headerlink" href="#build-provenance-and-archiving" title="Link to this heading">#</a></h2>
<p>Each CI build must produce and archive:</p>
<ul class="simple">
<li><p>build manifest (metadata)</p></li>
<li><p>container image digest</p></li>
<li><p>toolchain identifiers</p></li>
<li><p>source revision(s)</p></li>
</ul>
<p>These artifacts form the basis for:</p>
<ul class="simple">
<li><p>long-term reproducibility</p></li>
<li><p>forensic analysis</p></li>
<li><p>compliance and auditing</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><strong>Layer 1</strong> defines what the host <em>must</em> provide.</p></li>
<li><p><strong>Layer 2</strong> defines the default execution environment.</p></li>
<li><p><strong>Layer 3</strong> defines how Bazel achieves reproducibility and caching.</p></li>
<li><p>Reproducibility, traceability, and hermeticity are enforced through
<strong>explicit contracts</strong>, not assumptions.</p></li>
</ul>
<p>This separation allows S-CORE to scale infrastructure, evolve toolchains, and still
reproduce builds years into the future.</p>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="DR-001-infra.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">DR-001-Infra: Integration Strategy for External Development Tools</p>
      </div>
    </a>
    <a class="right-next"
       href="DR-002-infra.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">DR-002-Infra: Integration Testing in a Distributed Monolith</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#purpose">Purpose</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#core-requirements">Core Requirements</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#r1-long-term-reproducibility">R1 — Long-Term Reproducibility</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#r2-traceability">R2 — Traceability</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#r3-hermeticity-practical">R3 — Hermeticity (Practical)</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#three-layer-execution-contract">Three-Layer Execution Contract</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#layer-1-host-platform-contract">Layer 1 — Host Platform Contract</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#scope">Scope</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#responsibilities">Responsibilities</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#requirements">Requirements</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#known-constraints">Known Constraints</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#policy">Policy</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#layer-2-execution-context-contract-devcontainer">Layer 2 — Execution Context Contract (Devcontainer)</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Purpose</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#definition">Definition</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#baseline-preservation-and-reproducibility">Baseline Preservation and Reproducibility</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">Responsibilities</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#non-goals">Non-Goals</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">Policy</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#layer-3-bazel-contract">Layer 3 — Bazel Contract</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#bazel-versioning">Bazel Versioning</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#toolchains-and-tools">Toolchains and Tools</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#hermeticity-guarantees">Hermeticity Guarantees</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#minimum-supported-baselines">Minimum Supported Baselines</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#os-and-runtime-baseline">OS and Runtime Baseline</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#rationale">Rationale</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#build-provenance-and-archiving">Build Provenance and Archiving</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#summary">Summary</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  
  <div class="tocsection editthispage">
    <a href="https://github.com/eclipse-score/score/edit/main/'docs'/design_decisions/DR-001-infra-extension.md">
      <i class="fa-solid fa-pencil"></i>
      
      
        
          Edit on GitHub
        
      
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.2.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>