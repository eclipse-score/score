
<!DOCTYPE html>


<html lang="en" data-content_root="../../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Building source code &#8212; S-CORE  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css?v=4ae1632d" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/score.css?v=6e51530f" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/score_needs.css?v=e97392eb" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/score_design.css?v=d9fd870c" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-data-viewer/jsonview.bundle.css?v=f6ef2277" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-needs/libs/html/datatables.min.css?v=4b4fd840" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-needs/common_css/need_toggle.css?v=5c6620df" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-needs/common_css/needstable.css?v=5e1b6797" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-needs/common_css/need_core.css?v=f5b60a78" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-needs/common_css/need_links.css?v=2150a916" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-needs/common_css/need_style.css?v=92936fa5" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-needs/modern.css?v=803738c0" />
  
  <!-- So that users can add custom icons -->
  <script src="../../../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../../../_static/jquery.js?v=5d32c60e"></script>
    <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="../../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/design-tabs.js?v=f930bc37"></script>
    <script src="../../../_static/sphinx-data-viewer/jsonview.bundle.js?v=18cd53c5"></script>
    <script src="../../../_static/sphinx-data-viewer/jsonview_loader.js?v=f7ff7e7d"></script>
    <script src="../../../_static/sphinx-needs/libs/html/datatables.min.js?v=8a4aee21"></script>
    <script src="../../../_static/sphinx-needs/libs/html/datatables_loader.js?v=a2cae175"></script>
    <script src="../../../_static/sphinx-needs/libs/html/sphinx_needs_collapse.js?v=dca66431"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'how_tos/score_book/sample_application/building_source_code';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.16.1';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://eclipse-score.github.io/score/versions.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = '';
        DOCUMENTATION_OPTIONS.show_version_warning_banner =
            false;
        </script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Reference integration" href="reference_integration.html" />
    <link rel="prev" title="Documentation generation" href="doc_generation.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="0.1" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../../index.html">
  
  
  
  
  
  
    <p class="title logo__title">Eclipse S-CORE</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../requirements/index.html">
    Requirements
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../features/index.html">
    Features
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../modules/index.html">
    Modules
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../contribute/index.html">
    Contribute
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../../index.html">
    How-Tos
  </a>
</li>

            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button"
                data-bs-toggle="dropdown" aria-expanded="false"
                aria-controls="pst-nav-more-links">
                    More
                </button>
                <ul id="pst-nav-more-links" class="dropdown-menu">
                    
<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../../../score_releases/index.html">
    Releases
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../../../score_tools/index.html">
    Tools
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../../../platform_management_plan/index.html">
    PMP
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-external" href="https://projects.eclipse.org/projects/automotive.score">
    Eclipse
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../../../design_decisions/index.html">
    Decision Records
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../../../introduction/index.html">
    Eclipse S-CORE (Eclipse Safe Open Vehicle Core)
  </a>
</li>

                </ul>
            </li>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/eclipse-score" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
        <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-2"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-2"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-2"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-2">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../requirements/index.html">
    Requirements
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../features/index.html">
    Features
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../modules/index.html">
    Modules
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../contribute/index.html">
    Contribute
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../../index.html">
    How-Tos
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../score_releases/index.html">
    Releases
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../score_tools/index.html">
    Tools
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../platform_management_plan/index.html">
    PMP
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://projects.eclipse.org/projects/automotive.score">
    Eclipse
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../design_decisions/index.html">
    Decision Records
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../introduction/index.html">
    Eclipse S-CORE (Eclipse Safe Open Vehicle Core)
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/eclipse-score" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
          <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-3"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-3"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-3"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-3">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../index.html">S-Core Book</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../technology_overview.html">Overview of technologies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../software_architecture_overview.html">Software Architecture Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../module_structure_overview.html">Module Structure Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../integration_process.html">Integration process</a></li>
<li class="toctree-l2 current active has-children"><a class="reference internal" href="index.html">Sample application</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="first_score_module.html">First S-Core Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="doc_generation.html">Documentation generation</a></li>
<li class="toctree-l3 current active"><a class="current reference internal" href="#">Building source code</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference_integration.html">Reference integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="cicd_workflows.html">CI/CD Workflows</a></li>
<li class="toctree-l3"><a class="reference internal" href="extending_doc.html">extending doc</a></li>
</ul>
</details></li>
</ul>
</details></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../../index.html" class="nav-link">How-Tos</a></li>
    
    
    <li class="breadcrumb-item"><a href="../index.html" class="nav-link">S-Core Book</a></li>
    
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">Sample application</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Building source code</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="building-source-code">
<h1>Building source code<a class="headerlink" href="#building-source-code" title="Link to this heading">#</a></h1>
<p>Now, as we’ve provided the documentation for our component, it is time to add some code as shown in the following commit (TODO: Link to commit).</p>
<p>Let us go through the most important parts of it and start with bazel src/BUILD file (TODO: link).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="n">cc_binary</span><span class="p">(</span>
<span class="linenos"> 2</span>    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;scrample&quot;</span><span class="p">,</span>
<span class="linenos"> 3</span>    <span class="n">srcs</span> <span class="o">=</span> <span class="p">[</span>
<span class="linenos"> 4</span>        <span class="s2">&quot;assert_handler.cpp&quot;</span><span class="p">,</span>
<span class="linenos"> 5</span>        <span class="s2">&quot;assert_handler.h&quot;</span><span class="p">,</span>
<span class="linenos"> 6</span>        <span class="s2">&quot;main.cpp&quot;</span><span class="p">,</span>
<span class="linenos"> 7</span>    <span class="p">],</span>
<span class="linenos"> 8</span>    <span class="n">visibility</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;//visibility:public&quot;</span><span class="p">],</span>
<span class="linenos"> 9</span>    <span class="n">deps</span> <span class="o">=</span> <span class="p">[</span>
<span class="linenos">10</span>        <span class="s2">&quot;:sample_sender_receiver&quot;</span><span class="p">,</span>
<span class="linenos">11</span>        <span class="s2">&quot;@communication//score/mw/com&quot;</span><span class="p">,</span>
<span class="linenos">12</span>        <span class="s2">&quot;@boost.program_options&quot;</span><span class="p">,</span>
<span class="linenos">13</span>        <span class="s2">&quot;@score-baselibs//score/language/futurecpp&quot;</span><span class="p">,</span>
<span class="linenos">14</span>        <span class="s2">&quot;@score-baselibs//score/mw/log&quot;</span><span class="p">,</span>
<span class="linenos">15</span>    <span class="p">],</span>
<span class="linenos">16</span><span class="p">)</span>
</pre></div>
</div>
<p><a class="reference external" href="https://bazel.build/reference/be/c-cpp#cc_binary">cc_binary</a> produces a cpp binary, by starting C/C++ compilation with the specified toolchain.
We will talk about defining and specifying the toolchain later in this chapter. Let us now have a look at the content of the <em>cc_binary</em>.</p>
<p>Its attributes are very well described in the bazel documentation. What we can see is, that it has three source files that needs to be compiled and
that our <em>scrample</em> binary depends on <em>communication module</em> for the ipc functionality and on <em>baselibs</em> modules for cpp language extension and logging
functionality. You can see, <em>cc_binary</em> for scrample has the “public” visibility. That’s because we want to reference it in other modules.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="n">cc_library</span><span class="p">(</span>
<span class="linenos"> 2</span>    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;sample_sender_receiver&quot;</span><span class="p">,</span>
<span class="linenos"> 3</span>    <span class="n">srcs</span> <span class="o">=</span> <span class="p">[</span>
<span class="linenos"> 4</span>        <span class="s2">&quot;sample_sender_receiver.cpp&quot;</span><span class="p">,</span>
<span class="linenos"> 5</span>    <span class="p">],</span>
<span class="linenos"> 6</span>    <span class="n">hdrs</span> <span class="o">=</span> <span class="p">[</span>
<span class="linenos"> 7</span>        <span class="s2">&quot;sample_sender_receiver.h&quot;</span><span class="p">,</span>
<span class="linenos"> 8</span>    <span class="p">],</span>
<span class="linenos"> 9</span>    <span class="n">deps</span> <span class="o">=</span> <span class="p">[</span>
<span class="linenos">10</span>        <span class="s2">&quot;:datatype&quot;</span><span class="p">,</span>
<span class="linenos">11</span>        <span class="s2">&quot;@communication//score/mw/com&quot;</span><span class="p">,</span>
<span class="linenos">12</span>        <span class="s2">&quot;@score-baselibs//score/mw/log&quot;</span><span class="p">,</span>
<span class="linenos">13</span>    <span class="p">],</span>
<span class="linenos">14</span><span class="p">)</span>
<span class="linenos">15</span>
<span class="linenos">16</span><span class="n">cc_library</span><span class="p">(</span>
<span class="linenos">17</span>    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;datatype&quot;</span><span class="p">,</span>
<span class="linenos">18</span>    <span class="n">srcs</span> <span class="o">=</span> <span class="p">[</span>
<span class="linenos">19</span>        <span class="s2">&quot;datatype.cpp&quot;</span><span class="p">,</span>
<span class="linenos">20</span>    <span class="p">],</span>
<span class="linenos">21</span>    <span class="n">hdrs</span> <span class="o">=</span> <span class="p">[</span>
<span class="linenos">22</span>        <span class="s2">&quot;datatype.h&quot;</span><span class="p">,</span>
<span class="linenos">23</span>    <span class="p">],</span>
<span class="linenos">24</span>    <span class="n">deps</span> <span class="o">=</span> <span class="p">[</span>
<span class="linenos">25</span>        <span class="s2">&quot;@communication//score/mw/com&quot;</span><span class="p">,</span>
<span class="linenos">26</span>        <span class="s2">&quot;@score-baselibs//score/language/futurecpp&quot;</span><span class="p">,</span>
<span class="linenos">27</span>    <span class="p">],</span>
<span class="linenos">28</span><span class="p">)</span>
</pre></div>
</div>
<p>There is also a sender/receiver and a datatype  <a class="reference external" href="https://bazel.build/reference/be/c-cpp#cc_library">cc_library</a>,
separated in standalone libraries for a better testability.</p>
<p>Now, as we’ve defined the targets, it would be time to build the binary. For this, we need first to specify the toolchain,
that should be used for building and that will call compiler and linker at the end. We aim to run our application in QNX qemu
environment, therefore we should compile our application with qcc toolchain.</p>
<p>Before we continue, it is important to mention two fundamental concepts in bazel,
<a class="reference external" href="https://bazel.build/extending/toolchains">bazel toolchains</a> and <a class="reference external" href="https://bazel.build/extending/platforms">bazel platforms</a>.
Explanation of these concepts goes beyond this small tutorial. But to move further it is important to give a brief explanation
of what the topics are.</p>
<p>Bazel toolchain specify, at least in our case, which compiler toolchain we are using to compile and link our code. It could be
qcc, gcc or llvm toolchain.</p>
<p>Bazel platform specify for which cpu architecture the toolchain should build the binary, e.g. arm or x86.</p>
<p>For our small scrample example we plan to build with qcc toolchain for x86_64 platform.</p>
<p>To add qcc toolchain support to our module, we need first to extend our MODULE.bazel file with toolchain information.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1"># Configure the target toolchain.</span>
<span class="linenos"> 2</span><span class="n">bazel_dep</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;score_toolchains_qnx&quot;</span><span class="p">,</span> <span class="n">version</span> <span class="o">=</span> <span class="s2">&quot;0.0.2&quot;</span><span class="p">,</span> <span class="n">dev_dependency</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos"> 3</span><span class="n">qnx</span> <span class="o">=</span> <span class="n">use_extension</span><span class="p">(</span><span class="s2">&quot;@score_toolchains_qnx//:extensions.bzl&quot;</span><span class="p">,</span> <span class="s2">&quot;toolchains_qnx&quot;</span><span class="p">,</span> <span class="n">dev_dependency</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos"> 4</span><span class="n">qnx</span><span class="o">.</span><span class="n">sdp</span><span class="p">(</span>
<span class="linenos"> 5</span>    <span class="n">sha256</span> <span class="o">=</span> <span class="s2">&quot;f2e0cb21c6baddbcb65f6a70610ce498e7685de8ea2e0f1648f01b327f6bac63&quot;</span><span class="p">,</span>
<span class="linenos"> 6</span>    <span class="n">strip_prefix</span> <span class="o">=</span> <span class="s2">&quot;installation&quot;</span><span class="p">,</span>
<span class="linenos"> 7</span>    <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://www.qnx.com/download/download/79858/installation.tgz&quot;</span><span class="p">,</span>
<span class="linenos"> 8</span><span class="p">)</span>
<span class="linenos"> 9</span><span class="n">use_repo</span><span class="p">(</span><span class="n">qnx</span><span class="p">,</span> <span class="s2">&quot;toolchains_qnx_sdp&quot;</span><span class="p">)</span>
<span class="linenos">10</span><span class="n">use_repo</span><span class="p">(</span><span class="n">qnx</span><span class="p">,</span> <span class="s2">&quot;toolchains_qnx_qcc&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>As you can see, we reference here the score_toolchains_qnx module, that as already explained in the technology_overview.rst (TODO: link here),
configures qnx toolchain in s-core project.</p>
<p>TODO: can Niko provide more description on what is happening here?</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>CI/CD pipeline will use its own QNX license for building the code with qnx. If you want to build the source code with
qnx compiler locally, you will need to acquire a QNX 8.x “free for non commercial use” license and install QNX 8.x SDP
as described here (TODO: Link).</p>
</div>
<p>As our application depends on baselibs and communication module, as described in the src/BUILD (TODO: Link) file, we need to add
the dependencies to that modules into the MODULE.bazel file (TODO: link ) as well, as shown below:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="n">bazel_dep</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;score-baselibs&quot;</span><span class="p">,</span> <span class="n">version</span> <span class="o">=</span> <span class="s2">&quot;0.1.1&quot;</span><span class="p">)</span>
<span class="linenos">2</span>
<span class="linenos">3</span><span class="n">bazel_dep</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;communication&quot;</span><span class="p">,</span> <span class="n">version</span> <span class="o">=</span> <span class="s2">&quot;0.1.1&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Till now we’ve just said, that our module depends on another bazel module, that defines qcc toolchain and that
we want to use this toolchain in our module. Now we need to specify the platform and configure the usage of
qcc toolchain in .bazelrc (TODO: link) file:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="n">build</span><span class="p">:</span><span class="n">_bl_common</span> <span class="o">--</span><span class="nd">@score</span><span class="o">-</span><span class="n">baselibs</span><span class="o">//</span><span class="n">score</span><span class="o">/</span><span class="n">mw</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">detail</span><span class="o">/</span><span class="n">flags</span><span class="p">:</span><span class="n">KUse_Stub_Implementation_Only</span><span class="o">=</span><span class="kc">False</span>
<span class="linenos"> 2</span><span class="n">build</span><span class="p">:</span><span class="n">_bl_common</span> <span class="o">--</span><span class="nd">@score</span><span class="o">-</span><span class="n">baselibs</span><span class="o">//</span><span class="n">score</span><span class="o">/</span><span class="n">mw</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">flags</span><span class="p">:</span><span class="n">KRemote_Logging</span><span class="o">=</span><span class="kc">False</span>
<span class="linenos"> 3</span><span class="n">build</span><span class="p">:</span><span class="n">_bl_common</span> <span class="o">--</span><span class="nd">@score</span><span class="o">-</span><span class="n">baselibs</span><span class="o">//</span><span class="n">score</span><span class="o">/</span><span class="n">json</span><span class="p">:</span><span class="n">base_library</span><span class="o">=</span><span class="n">nlohmann</span>
<span class="linenos"> 4</span><span class="n">build</span><span class="p">:</span><span class="n">_bl_common</span> <span class="o">--</span><span class="nd">@score</span><span class="o">-</span><span class="n">baselibs</span><span class="o">//</span><span class="n">score</span><span class="o">/</span><span class="n">memory</span><span class="o">/</span><span class="n">shared</span><span class="o">/</span><span class="n">flags</span><span class="p">:</span><span class="n">use_typedshmd</span><span class="o">=</span><span class="kc">False</span>
<span class="linenos"> 5</span><span class="n">build</span><span class="p">:</span><span class="n">_bl_common</span> <span class="o">--</span><span class="nd">@communication</span><span class="o">//</span><span class="n">score</span><span class="o">/</span><span class="n">mw</span><span class="o">/</span><span class="n">com</span><span class="o">/</span><span class="n">flags</span><span class="p">:</span><span class="n">tracing_library</span><span class="o">=</span><span class="n">stub</span>
<span class="linenos"> 6</span><span class="n">build</span><span class="p">:</span><span class="n">_bl_common</span> <span class="o">--</span><span class="n">cxxopt</span><span class="o">=-</span><span class="n">Wno</span><span class="o">-</span><span class="n">error</span><span class="o">=</span><span class="n">mismatched</span><span class="o">-</span><span class="n">new</span><span class="o">-</span><span class="n">delete</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="n">build</span><span class="p">:</span><span class="n">x86_64</span><span class="o">-</span><span class="n">qnx</span> <span class="o">--</span><span class="n">config</span><span class="o">=</span><span class="n">_bl_common</span>
<span class="linenos"> 9</span><span class="n">build</span><span class="p">:</span><span class="n">x86_64</span><span class="o">-</span><span class="n">qnx</span> <span class="o">--</span><span class="n">noexperimental_merged_skyframe_analysis_execution</span>
<span class="linenos">10</span><span class="n">build</span><span class="p">:</span><span class="n">x86_64</span><span class="o">-</span><span class="n">qnx</span> <span class="o">--</span><span class="n">action_env</span><span class="o">=</span><span class="n">BAZEL_DO_NOT_DETECT_CPP_TOOLCHAIN</span><span class="o">=</span><span class="mi">1</span>
<span class="linenos">11</span><span class="n">build</span><span class="p">:</span><span class="n">x86_64</span><span class="o">-</span><span class="n">qnx</span> <span class="o">--</span><span class="n">incompatible_enable_cc_toolchain_resolution</span>
<span class="linenos">12</span><span class="n">build</span><span class="p">:</span><span class="n">x86_64</span><span class="o">-</span><span class="n">qnx</span> <span class="o">--</span><span class="n">incompatible_strict_action_env</span>
<span class="hll"><span class="linenos">13</span><span class="n">build</span><span class="p">:</span><span class="n">x86_64</span><span class="o">-</span><span class="n">qnx</span> <span class="o">--</span><span class="n">platforms</span><span class="o">=</span><span class="nd">@score_toolchains_qnx</span><span class="o">//</span><span class="n">platforms</span><span class="p">:</span><span class="n">x86_64</span><span class="o">-</span><span class="n">qnx</span>
</span><span class="linenos">14</span><span class="n">build</span><span class="p">:</span><span class="n">x86_64</span><span class="o">-</span><span class="n">qnx</span> <span class="o">--</span><span class="n">sandbox_writable_path</span><span class="o">=/</span><span class="n">var</span><span class="o">/</span><span class="n">tmp</span>
</pre></div>
</div>
<p>Here we define generall compiler and linker settings for our module, <em>build:_bl_common_stub</em>, that are then taken over by
qnx configuration, <em>build:x86_64-qnx</em>. Here it is important to understand</p>
<p>In line 16, we specify that we want to compile with qnx toolchain, that we previously
referenced in the MODULE.bazel file, for the x86_64-qnx platform. This is important, as our qnx toolchain can provide support
for multiple platforms, e.g. arm and x86.</p>
<p>Finally, we can compile our code. It is important to specify which config should be used by the compilation, as shown in the example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="n">bazel</span> <span class="n">build</span> <span class="o">--</span><span class="n">config</span><span class="o">=</span><span class="n">x86_64</span><span class="o">-</span><span class="n">qnx</span>  <span class="o">//</span><span class="n">src</span><span class="p">:</span><span class="n">scrample</span>
</pre></div>
</div>
<p>After the successfull compilation the binary can be normally found in the build folder:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="n">Target</span> <span class="o">//</span><span class="n">src</span><span class="p">:</span><span class="n">scrample</span> <span class="n">up</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">date</span><span class="p">:</span>
<span class="linenos">2</span>    <span class="n">bazel</span><span class="o">-</span><span class="nb">bin</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">scrample</span>
</pre></div>
</div>
<p>Now it is time to run the binary in the reference QNX QEMU image.</p>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="doc_generation.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Documentation generation</p>
      </div>
    </a>
    <a class="right-next"
       href="reference_integration.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Reference integration</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">

  
  <div class="tocsection editthispage">
    <a href="https://github.com/eclipse-score/score/edit/main/docs/how_tos/score_book/sample_application/building_source_code.rst">
      <i class="fa-solid fa-pencil"></i>
      
      
        
          Edit on GitHub
        
      
    </a>
  </div>
</div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../_sources/how_tos/score_book/sample_application/building_source_code.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.2.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>